Ext.ns("Ext.ux.form");Ext.ux.form.FileUploadField=Ext.extend(Ext.form.TextField,{buttonText:"Browse...",buttonOnly:false,buttonOffset:3,readOnly:true,autoSize:Ext.emptyFn,initComponent:function(){this.supr().initComponent.call(this);this.addEvents("fileselected")},onRender:function(c,a){this.supr().onRender.call(this,c,a);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-file-wrap"});this.el.addClass("x-form-file-text");this.el.dom.removeAttribute("name");this.createFileInput();if(this.disabled){this.fileInput.dom.disabled=true}var b=Ext.applyIf(this.buttonCfg||{},{text:this.buttonText});this.button=new Ext.Button(Ext.apply(b,{renderTo:this.wrap,cls:"x-form-file-btn"+(b.iconCls?" x-btn-icon":"")}));this.addFileListeners();if(this.buttonOnly){this.el.hide();this.wrap.setWidth(this.button.getEl().getWidth())}},addFileListeners:function(){this.fileInput.on({change:function(){var a=this.fileInput.dom.value;this.setValue(a);this.fireEvent("fileselected",this,a)},mouseover:function(){this.button.addClass(["x-btn-over","x-btn-focus"])},mouseout:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},mousedown:function(){this.button.addClass("x-btn-click")},mouseup:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},scope:this})},createFileInput:function(){this.fileInput=this.wrap.createChild({id:this.getFileInputId(),name:this.name||this.getId(),cls:"x-form-file",tag:"input",type:"file",size:1})},reset:function(){this.fileInput.removeAllListeners();this.fileInput.remove();this.createFileInput();this.addFileListeners();this.supr().reset.call(this)},onDestroy:function(){if(this.fileInput){Ext.destroy(this.fileInput);this.fileInput=null}if(this.button){this.button.destroy();this.button=null}this.supr().onDestroy.call(this)},onEnable:function(){this.supr().onEnable.call(this);this.fileInput.dom.disabled=false;this.button.enable()},onDisable:function(){this.supr().onDisable.call(this);this.fileInput.dom.disabled=true;this.button.disable()},getFileInputId:function(){return this.id+"-file"},onResize:function(a,b){this.supr().onResize.call(this,a,b);this.wrap.setWidth(a);if(!this.buttonOnly){var a=this.wrap.getWidth()-this.button.getEl().getWidth()-this.buttonOffset;this.el.setWidth(a)}},preFocus:Ext.emptyFn,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}});Ext.reg("fileuploadfield",Ext.ux.form.FileUploadField);Ext.form.FileUploadField=Ext.ux.form.FileUploadField;Ext.ns("Ext.ux.form");Ext.ux.form.SearchField=Ext.extend(Ext.form.TwinTriggerField,{initComponent:function(){this.supr().initComponent.call(this);this.on("specialkey",function(a,b){if(b.getKey()==b.ENTER){this.onTrigger2Click()}},this)},validationEvent:false,validateOnBlur:false,trigger1Class:"x-form-clear-trigger",trigger2Class:"x-form-search-trigger",hideTrigger1:true,width:180,hasSearch:false,paramName:"query",onTrigger1Click:function(){if(this.hasSearch){this.el.dom.value="";var a={start:0};this.store.baseParams=this.store.baseParams||{};this.store.baseParams[this.paramName]="";this.store.reload({params:a});this.triggers[0].hide();this.hasSearch=false}},onTrigger2Click:function(){var a=this.getRawValue();if(a.length<1){this.onTrigger1Click();return}var b={start:0};this.store.baseParams=this.store.baseParams||{};this.store.baseParams[this.paramName]=a;this.store.reload({params:b});this.hasSearch=true;this.triggers[0].show()}});Ext.reg("searchfield",Ext.ux.form.SearchField);Ext.form.SearchField=Ext.ux.form.SearchField;Ext.ns("Ext.ux.form");Ext.ux.form.SelectBox=Ext.extend(Ext.form.ComboBox,{searchResetDelay:100,editable:false,forceSelection:true,rowHeight:false,lastSearchTerm:false,triggerAction:"all",mode:"local",lazyInit:false,constructor:function(a){this.supr().constructor.call(this,a);this.lastSelectedIndex=this.selectedIndex||0},initComponent:function(){if(!this.store&&this.data){this.store=new Ext.data.ArrayStore({fields:["text"],data:this.data,expandData:true});this.displayField="text"}this.supr().initComponent.apply(this,arguments)},initEvents:function(){this.supr().initEvents.apply(this,arguments);this.el.on("keydown",this.keySearch,this,true);this.cshTask=new Ext.util.DelayedTask(this.clearSearchHistory,this)},keySearch:function(f,d,b){var a=f.getKey();var c=String.fromCharCode(a);var g=0;if(!this.store.getCount()){return}switch(a){case Ext.EventObject.HOME:f.stopEvent();this.selectFirst();return;case Ext.EventObject.END:f.stopEvent();this.selectLast();return;case Ext.EventObject.PAGEDOWN:this.selectNextPage();f.stopEvent();return;case Ext.EventObject.PAGEUP:this.selectPrevPage();f.stopEvent();return}if((f.hasModifier()&&!f.shiftKey)||f.isNavKeyPress()||f.isSpecialKey()){return}if(this.lastSearchTerm==c){g=this.lastSelectedIndex}this.search(this.displayField,c,g);this.cshTask.delay(this.searchResetDelay)},onRender:function(b,a){this.store.on("load",this.calcRowsPerPage,this);this.supr().onRender.apply(this,arguments);if(this.mode=="local"){this.calcRowsPerPage()}},onSelect:function(a,c,b){if(this.fireEvent("beforeselect",this,a,c)!==false){this.setValue(a.data[this.valueField||this.displayField]);if(!b){this.collapse()}this.lastSelectedIndex=c+1;this.fireEvent("select",this,a,c)}},render:function(a){this.supr().render.apply(this,arguments);if(Ext.isSafari){this.el.swallowEvent("mousedown",true)}this.el.unselectable();this.innerList.unselectable();this.trigger.unselectable();this.innerList.on("mouseup",function(d,c,b){if(c.id&&c.id==this.innerList.id){return}this.onViewClick()},this);this.innerList.on("mouseover",function(d,c,b){if(c.id&&c.id==this.innerList.id){return}this.lastSelectedIndex=this.view.getSelectedIndexes()[0]+1;this.cshTask.delay(this.searchResetDelay)},this);this.trigger.un("click",this.onTriggerClick,this);this.trigger.on("mousedown",function(d,c,b){d.preventDefault();this.onTriggerClick()},this);this.on("collapse",function(d,c,b){Ext.getDoc().un("mouseup",this.collapseIf,this)},this,true);this.on("expand",function(d,c,b){Ext.getDoc().on("mouseup",this.collapseIf,this)},this,true)},clearSearchHistory:function(){this.lastSelectedIndex=0;this.lastSearchTerm=false},selectFirst:function(){this.focusAndSelect(this.store.data.first())},selectLast:function(){this.focusAndSelect(this.store.data.last())},selectPrevPage:function(){if(!this.rowHeight){return}var a=Math.max(this.selectedIndex-this.rowsPerPage,0);this.focusAndSelect(this.store.getAt(a))},selectNextPage:function(){if(!this.rowHeight){return}var a=Math.min(this.selectedIndex+this.rowsPerPage,this.store.getCount()-1);this.focusAndSelect(this.store.getAt(a))},search:function(c,b,d){c=c||this.displayField;this.lastSearchTerm=b;var a=this.store.find.apply(this.store,arguments);if(a!==-1){this.focusAndSelect(a)}},focusAndSelect:function(a){var b=typeof a==="number"?a:this.store.indexOf(a);this.select(b,this.isExpanded());this.onSelect(this.store.getAt(a),b,this.isExpanded())},calcRowsPerPage:function(){if(this.store.getCount()){this.rowHeight=Ext.fly(this.view.getNode(0)).getHeight();this.rowsPerPage=this.maxHeight/this.rowHeight}else{this.rowHeight=false}}});Ext.reg("selectbox",Ext.ux.form.SelectBox);Ext.form.SelectBox=Ext.ux.form.SelectBox;
/*
 * Ext JS Library 3.0.0
 * Copyright(c) 2006-2009 Ext JS, LLC
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ns("Ext.ux.grid");Ext.ux.grid.BufferView=Ext.extend(Ext.grid.GridView,{rowHeight:19,borderHeight:2,scrollDelay:100,cacheSize:20,cleanDelay:500,initTemplates:function(){this.supr().initTemplates.call(this);var a=this.templates;a.rowHolder=new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}"></div>');a.rowHolder.disableFormats=true;a.rowHolder.compile();a.rowBody=new Ext.Template('<table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}</tr>",(this.enableRowBody?'<tr class="x-grid3-row-body-tr" style="{bodyStyle}"><td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on"><div class="x-grid3-row-body">{body}</div></td></tr>':""),"</tbody></table>");a.rowBody.disableFormats=true;a.rowBody.compile()},getStyleRowHeight:function(){return Ext.isBorderBox?(this.rowHeight+this.borderHeight):this.rowHeight},getCalculatedRowHeight:function(){return this.rowHeight+this.borderHeight},getVisibleRowCount:function(){var b=this.getCalculatedRowHeight();var a=this.scroller.dom.clientHeight;return(a<1)?0:Math.ceil(a/b)},getVisibleRows:function(){var a=this.getVisibleRowCount();var b=this.scroller.dom.scrollTop;var c=(b==0?0:Math.floor(b/this.getCalculatedRowHeight())-1);return{first:Math.max(c,0),last:Math.min(c+a+2,this.ds.getCount()-1)}},doRender:function(g,k,u,a,s,A,l){var b=this.templates,f=b.cell,h=b.row,x=b.rowBody,n=s-1;var t=this.getStyleRowHeight();var z=this.getVisibleRows();var d="width:"+this.getTotalWidth()+";height:"+t+"px;";var D=[],w,E,v={},m={tstyle:d},q;for(var y=0,C=k.length;y<C;y++){q=k[y];w=[];var o=(y+a);var e=o>=z.first&&o<=z.last;if(e){for(var B=0;B<s;B++){E=g[B];v.id=E.id;v.css=B==0?"x-grid3-cell-first ":(B==n?"x-grid3-cell-last ":"");v.attr=v.cellAttr="";v.value=E.renderer(q.data[E.name],v,q,o,B,u);v.style=E.style;if(v.value==undefined||v.value===""){v.value="&#160;"}if(q.dirty&&typeof q.modified[E.name]!=="undefined"){v.css+=" x-grid3-dirty-cell"}w[w.length]=f.apply(v)}}var F=[];if(A&&((o+1)%2==0)){F[0]="x-grid3-row-alt"}if(q.dirty){F[1]=" x-grid3-dirty-row"}m.cols=s;if(this.getRowClass){F[2]=this.getRowClass(q,o,m,u)}m.alt=F.join(" ");m.cells=w.join("");D[D.length]=!e?b.rowHolder.apply(m):(l?x.apply(m):h.apply(m))}return D.join("")},isRowRendered:function(a){var b=this.getRow(a);return b&&b.childNodes.length>0},syncScroll:function(){this.supr().syncScroll.apply(this,arguments);this.update()},update:function(){if(this.scrollDelay){if(!this.renderTask){this.renderTask=new Ext.util.DelayedTask(this.doUpdate,this)}this.renderTask.delay(this.scrollDelay)}else{this.doUpdate()}},doUpdate:function(){if(this.getVisibleRowCount()>0){var f=this.grid,b=f.colModel,h=f.store;var e=this.getColumnData();var a=this.getVisibleRows();for(var d=a.first;d<=a.last;d++){if(!this.isRowRendered(d)){var c=this.doRender(e,[h.getAt(d)],h,d,b.getColumnCount(),f.stripeRows,true);this.getRow(d).innerHTML=c}}this.clean()}},clean:function(){if(!this.cleanTask){this.cleanTask=new Ext.util.DelayedTask(this.doClean,this)}this.cleanTask.delay(this.cleanDelay)},doClean:function(){if(this.getVisibleRowCount()>0){var b=this.getVisibleRows();b.first-=this.cacheSize;b.last+=this.cacheSize;var c=0,d=this.getRows();if(b.first<=0){c=b.last+1}for(var a=this.ds.getCount();c<a;c++){if((c<b.first||c>b.last)&&d[c].innerHTML){d[c].innerHTML=""}}}},layout:function(){this.supr().layout.call(this);this.update()}});Ext.DomHelper.createDomX=function(g,b){var d,e=document,c,a,f,h;if(Ext.isArray(g)){d=e.createDocumentFragment();Ext.each(g,function(i){Ext.DomHelper.createDomX(i,d)})}else{if(typeof g=="string"){d=e.createTextNode(g)}else{d=e.createElement(g.tag||"div");c=!!d.setAttribute;for(a in g){f=g[a];if(["tag","children","cn","html","style","listeners"].indexOf(a)==-1&&!Ext.isFunction(f)){if(a=="cls"){d.className=f}else{c?d.setAttribute(a,f):d[a]=f}}}Ext.DomHelper.applyStyles(d,g.style);if(h=g.children||g.cn){Ext.DomHelper.createDomX(h,d)}else{if(g.html){d.innerHTML=g.html}}if(g.listeners){Ext.EventManager.on(d,g.listeners)}}}if(b){b.appendChild(d)}return d};Ext.MessageBox.error=Ext.Msg.error=function(d,c,b,a){this.show({title:d,msg:c,buttons:this.OK,icon:this.ERROR,fn:b,scope:a});return this}.createDelegate(Ext.Msg);Ext.History.init=Ext.History.init.createInterceptor(function(){var a="";if(!Ext.getDom(this.fieldId)){a+='<input type="hidden" id="'+this.fieldId+'" />'}if(!Ext.getDom(this.iframeId)){a+='<iframe id="'+this.iframeId+'"></iframe>'}if(a!==""){Ext.DomHelper.insertHtml("afterEnd",document.body,'<form class="x-hidden">'+a+"</form>")}},Ext.History);Ext.grid.GridPanel.override({getView:function(){if(!this.view){this.view=new Ext.ux.grid.BufferView(this.viewConfig)}return this.view}});(Ext.isIE6||Ext.isIE7)&&(Ext.BLANK_IMAGE_URL="images/default/s.gif");Ext.state.Manager.setProvider(new Ext.state.CookieProvider());Ext.History.on({change:function(b){var a="Application.modules.",c=a+(new Function(["return ",a,b,";"].join(""))()?b:Application.pageNotFoundModule);new Function(["if(!",c,".render){",c,"=Application.addModule(",c,");}Application.changePage(",c,");"].join(""))()}});Application=Ext.apply(new Ext.util.Observable,(function(){var a=function(){var b=this.getToken()||Application.defaultModule;this.add(b);this.fireEvent("change",b)};return{init:function(){var b=this;b.addEvents("shutdown","start");Ext.EventManager.on(window,"beforeunload",function(c){if(b.fireEvent("shutdown")===false){c.stopEvent();return false}});b.fireEvent("start");Ext.History.init(a,Ext.History);delete b.init},cookie:Ext.copyTo({},Ext.state.Manager,"get,set,clear"),history:Ext.copyTo({get:function(){return this.getToken()}},Ext.History,"getToken,add,back,forward"),modules:{},defaultModule:"Welcome",pageNotFoundModule:"PageNotFound",urls:{logout:"./auth/logout/format/json",login:"./auth/login/format/json"}}}()));Application.modules.Welcome={title:"Willkommen",iconCls:"icon-home",html:"<p>Was soll hier nur stehen?</p>"};Application.modules.PageNotFound={title:"404 - Seite nicht gefunden",iconCls:"icon-error",html:"<h2>Die Seite konnte nicht gefunden werden...</h2>"};Ext.onReady(function(){Ext.QuickTips.init();Ext.apply(Ext.QuickTips.getQuickTip(),{maxWidth:500});Application.init();Ext.fly("loading-mask").fadeOut({useDisplay:true})});(function(){var b=new Ext.Panel({id:"navigation",region:"west",width:200,minWidth:200,maxWidth:200,unstyled:true,split:true,collapseMode:"mini",animCollapse:false,paddings:"0 5 5 5",margins:"2 0 5 5",defaults:{frame:true,collapsible:true,margins:"0 0 5 0"}});Application.addLinks=function(){var c=function(d){for(var e=0;e<d.length;e++){var f=d[e];d[e]={tag:"li",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:f.iconCls||null},{tag:"a",href:f.href||"javascript:;",html:f.html||f.text||"(no text)",listeners:f.handler?{click:f.handler}:(f.listeners?f.listeners:null)}]}}return d};return function(g){if(Ext.isArray(g)){for(var f=0;f<g.length;f++){Application.addLinks(g[f])}return}var d=g,e=[].concat(d.items);d={title:d.title||"(no text)",iconCls:d.iconCls||null,contentEl:Ext.DomHelper.createDomX({tag:"ul",cn:c(e)})};b.add(d);if(Ext.isReady){b.doLayout()}}}();Application.on("start",function(){b.doLayout();Ext.fly("navigation").on("click",function(){this.blur()},null,{delegate:"a"})});var a=new Ext.Panel({id:"content",region:"center",margins:"2 5 5 0",unstyled:true,activeItem:0,layout:{type:"card",deferredRender:true},defaults:{autoScroll:true,frame:true}});Application.addModule=a.add.createDelegate(a);Application.on("start",function(){Application.changePage=a.layout.setActiveItem.createDelegate(a.layout)});new Ext.Viewport({layout:"border",items:[{region:"north",xtype:"panel",contentEl:"header",border:false,height:63,bodyStyle:"background-color:#DFE8F6;"},b,a]})})();