(Ext.isIE6||Ext.isIE7)&&(Ext.BLANK_IMAGE_URL="images/default/s.gif");Ext.MessageBox.error=Ext.Msg.error=function(d,c,b,a){this.show({title:d,msg:c,buttons:this.OK,icon:this.ERROR,fn:b,scope:a});return this}.createDelegate(Ext.Msg);Antibodydb={getIconCls:function(){var a="icon-";return function(b){if(typeof b=="object"){b=b.iconCls?b.iconCls:false}return b?(a+b):null}}(),urls:{login:"./auth/login/format/json",index:"./"}};Antibodydb.LoginWindow=new Ext.Window({title:"Antibodydb - Login",iconCls:Antibodydb.getIconCls("lock"),height:135,width:300,layout:"fit",resizable:false,draggable:false,closable:false,border:false,items:{xtype:"form",ref:"form",url:Antibodydb.urls.login,frame:true,border:false,monitorValid:true,labelWidth:60,defaultType:"textfield",defaults:{allowBlank:false,anchor:"100%"},items:[{ref:"username",fieldLabel:"Username",name:"Username",listeners:{specialkey:function(b,a){if(a.getKey()==a.ENTER){this.ownerCt.password.focus()}},render:function(b,a){this.focus(false,400)}}},{ref:"password",fieldLabel:"Password",inputType:"password",name:"Password",listeners:{specialkey:function(b,a){if(a.getKey()==a.ENTER){this.ownerCt.send()}}}}],buttons:[{text:"Login",formBind:true,handler:function(a,b){this.ownerCt.ownerCt.send()}}],send:function(){if((this.username.isValid()||this.username.focus())&&!this.password.isValid()){return false}return this.getForm().submit({method:"POST",waitMsg:"Sending data...",success:this.handleSuccess,failure:this.handleFailure,scope:this})},handleFailure:function(a,b){Ext.Msg.error("Action Failed!",b.result?b.result.error:"Server Error",function(){a.items.first().focus()});a.reset()},handleSuccess:function(a,b){Ext.fly("loading-mask").fadeIn({callback:function(){window.location=Antibodydb.urls.index}})}}});Ext.onReady(function(){Ext.QuickTips.init();Antibodydb.LoginWindow.show();Ext.fly("loading-mask").fadeOut({useDisplay:true})});